<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Estuary Beach Event</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="{{url_for('static', filename='images/favicon.png')}}" type="image/x-icon">
        <link rel="stylesheet" href="{{url_for('static', filename='style/styles.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='style/style.css')}}">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
    </head>
<body>
<div class="blue-banner">
  <div class="banner-content">
    <h1>It's My Estuary Day!</h1>
    <p>Beach Cleanup Event - May 31st</p>
  </div>
</div>


<button id="sidebarToggle" aria-label="Open menu" class="sidebar-toggle-btn">
  â˜°
</button>

<nav id="sidebar" class="sidebar">
  <div class="sidebar-header">
    <h1>It's My Estuary Day!</h1>
    <button id="sidebarClose" aria-label="Close menu" class="sidebar-close-btn">&times;</button>
  </div>
  <ul class="sidebar-nav">
    <li><a href="#about">About</a></li>
    <li><a href="#memory">Memory</a></li>
    <li><a href="#footer">Footer</a></li>
  </ul>
  <button class="btn-admin sidebar-btn" type="button" data-bs-toggle="modal" data-bs-target="#admin-login">Admin login</button>
  <button class="record-btn sidebar-btn" type="button" data-bs-toggle="modal" data-bs-target="#modal-record" id="check">Record yourself!</button>
</nav>

<!--  black -->
<div class="sidebar-overlay"></div>

  <script>
    const sidebar = document.getElementById('sidebar');
const toggleBtn = document.getElementById('sidebarToggle');
const closeBtn = document.getElementById('sidebarClose');
const overlay = document.querySelector('.sidebar-overlay');

toggleBtn.addEventListener('click', () => {
  sidebar.classList.add('active');
  toggleBtn.classList.add('hidden');
});

closeBtn.addEventListener('click', () => {
  sidebar.classList.remove('active');
  toggleBtn.classList.remove('hidden');
});

overlay.addEventListener('click', () => {
  sidebar.classList.remove('active');
  toggleBtn.classList.remove('hidden');
});
  </script>

  <main id="mainContent">
    <!-- About section -->
<div class="about-container" id="about">
  <div class="about-content">
    <h2 class="record-text">Click below to record your contribution!</h2>
    <button class="record-btn" type="button" data-bs-toggle="modal" data-bs-target="#modal-record">Record yourself!</button>
    
    <h2 class="div-title" id="aboutdisplay"></h2>
    <div class="event-description"> <!-- New container -->
      <p id="aboutcontent"></p>
    </div>
  </div>
</div>

      <script>
        let iteration = 0;
        const txt = 'About the Event';
        const speed = 25;
        const animated3 = document.getElementById("aboutdisplay");

        function typeinabout(){
          if (iteration < txt.length) {
            var _re = txt.charAt(iteration)
            animated3.innerHTML += _re;
            setTimeout(typeinabout, speed);
            iteration++;
            return true;
          }
          return false;
        }

        const content = "It's My Estuary Day (IMED) is a beach cleanup event at Kaiser Park on Saturday, May 31 (Rain date: June 1), from 9 AM to 2 PM. This is a fantastic opportunity to support our community, enjoy nature, and meet people from across New York!";
        const about = document.getElementById("aboutcontent");
        let iter = 0;

        function typeinabout2(){
          if(iter < content.length){
            about.innerHTML += content.charAt(iter);
            iter++;
            setTimeout(typeinabout2, speed);
          }
        }

        document.addEventListener("DOMContentLoaded", (event)=> {
          typeinabout();
          typeinabout2();
        });
      </script>
    </div>

    <!-- Event poster -->
    <div class="poster container-fluid">
      <img src="{{url_for('static', filename='images/poster.png')}}" class="img-thumbnail" alt="Event Poster">
    </div>

    <!-- Memory section -->
    <div class="container-fluid" id="memory">
      <div class="card img-display">
        <img class="card-img-top card-img" src="{{url_for('static', filename='images/beachcleanup1.png')}}" alt="Beach Cleanup">
        <div class="card-body">
          <h2 class="card-title">Verrazano-Narrows Bridge</h2>
          <p class="card-infos">A bridge connecting Staten Island and Brooklyn, completed in 1959 (65 years ago).<br>
            For more information, visit <a href="https://en.wikipedia.org/wiki/Verrazzano-Narrows_Bridge">Wikipedia</a>
          </p>
          <h3 class="card-author">Photo by: Alex Liu, at Kaiser Park, Coney Island</h3>
        </div>
      </div>
    </div>

      <!-- Footer section -->
  <footer class="text-center text-white" style="background-color:#3c8dbc;" id="footer">
    <div class="container p-4">
      <section class="mb-4">
        <a class="btn btn-primary btn-floating m-1" style="background-color: #3b5998" href="https://www.facebook.com/BrooklynJohnDeweyHsInfo/" role="button">
          <img src="{{url_for('static', filename='images/facebook.png')}}" alt="Facebook">
        </a>
        <a class="btn btn-primary btn-floating m-1" style="background-color: #f81c1c" href="https://www.johndeweyhighschool.org/" role="button">
          <img src="{{url_for('static', filename='images/jdhs.png')}}" alt="JDHS Website">
        </a>
        <a class="btn btn-primary btn-floating m-1" style="background-color: #ac2bac" href="https://www.instagram.com/johndeweybk/" role="button">
          <img src="{{url_for('static', filename='images/instagram.png')}}" alt="Instagram">
        </a>
        <a class="btn btn-primary btn-floating m-1" style="background-color: #333333" href="https://github.com/Hahalxl" role="button">
          <img src="{{url_for('static', filename='images/github.png')}}" alt="GitHub">
        </a>
      </section>

      <section class="mb-4">
        <p>
          Thank you for participating in this event! See below for more information about this website.
        </p>
      </section>

      <section class="">
        <div class="row">
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">John Dewey High School</h5>
            <ul class="list-unstyled mb-0">
              <li><a href="https://www.johndeweyhighschool.org/" class="text-white">Main website</a></li>
              <li><a href="https://www.instagram.com/johndeweybk/" class="text-white">Instagram</a></li>
              <li><a href="https://www.facebook.com/BrooklynJohnDeweyHsInfo/" class="text-white">Facebook</a></li>
            </ul>
          </div>
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">About Us</h5>
            <ul class="list-unstyled mb-0">
              <li><a href="https://github.com/Hahalxl" class="text-white">Alexander's GitHub</a></li>
              <li><a href="https://github.com/abcd123alex" class="text-white">Alex's GitHub</a></li>
            </ul>
          </div>
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">Partner Organizations</h5>
            <ul class="list-unstyled mb-0">
              <li><a href="https://nysmea.wildapricot.org/" class="text-white">New York State Marine Education Association</a></li>
              <li><a href="https://cityparksfoundation.org/" class="text-white">City Parks Foundation</a></li>
              <li><a href="https://www.billionoysterproject.org/" class="text-white">Billion Oyster Project</a></li>
              <li><a href="https://nyaquarium.com/" class="text-white">New York Aquarium</a></li>
            </ul>
          </div>
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">Tools</h5>
            <ul class="list-unstyled mb-0">
              <li><a href="https://ngrok.com/" class="text-white">Ngrok</a></li>
              <li><a href="https://www.python.org/" class="text-white">Python</a></li>
              <li><a href="https://git-scm.com/" class="text-white">Git</a></li>
            </ul>
          </div>
        </div>
      </section>
    </div>
    
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
      Backend: Alexander Liang He<br>
      Frontend: Alexander Liang He & Alex Liu
    </div>
  </footer>
  </main>

  <!-- Record form modal -->
  <div class="modal fade" id="modal-record">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="header">
          <h1 class="header-text-1">Estuary Beach Event<br>Registration Form</h1>
        </div>

        <div class="modal-body">
          <form action="/record">
            <div class="div-input">
              <label for="Name" class="inputing">Name:*</label>
              <input type="text" class="input-first" name="first_name" placeholder="First Name*" required>
              <input type="text" class="input-last" name="last_name" placeholder="Last Name*" required>
              <label for="osis" class="inputing">OSIS/Student ID:</label>
              <input type="tel" name="osis" class="inputs" placeholder="Leave blank if you don't have one" maxlength="9" inputmode="numeric" pattern="\d{1,9}">
              <label for="email" class="inputing">Email:*</label>
              <input type="email" class="inputs" name="email" placeholder="example@email.com*" required>

              <label for="organization" class="inputing">Organization/School:</label> 
              <div class="dropdown" id="orgDropdown">
                <input type="text" class="dropdown-input" placeholder="Select or type organization..." name="organization"/>
                <span class="dropdown-arrow"></span>
                <div class="dropdown-list">
                  <input type="text" class="dropdown-search" placeholder="Search organization/schools..." />
                  <div class="dropdown-items-container"></div>
                  <div class="dropdown-no-results" style="display:none;">
                    No results found. Please enter your organization/school name and press enter.
                  </div>
                </div>
              </div>

              <div id="otherOrg">
                <label id="otherlabel" class="inputing" for="otherOrgInput">Other Organization:</label>
                <input class="inputs" type="text" id="otherOrgInput" name="organizations" placeholder="Enter organization name" />
              </div>

              <script>
                (function(){
                  const dropdown = document.getElementById('orgDropdown');
                  const dropdownInput = dropdown.querySelector('.dropdown-input');
                  const dropdownList = dropdown.querySelector('.dropdown-list');
                  const dropdownSearch = dropdown.querySelector('.dropdown-search');
                  const dropdownItemsContainer = dropdown.querySelector('.dropdown-items-container');
                  const noResultsMsg = dropdown.querySelector('.dropdown-no-results');
                  const otherOrgDiv = document.getElementById('otherOrg');
                  const otherOrgInput = document.getElementById('otherOrgInput');

                  const organizations = [
                    "Brooklyn Italians Soccer Club",
                    "Billion Oyster Project",
                    "City Parks Foundation",
                    "Eubie Blake P.S 25",
                    "Harbor School",
                    "John Dewey High School",
                    "Kingsborough Early College School",
                    "NYSMEA",
                    "Partnership for Parks",
                    "St. Patrick's School",
                    "Wildlife Conservation Society",
                    "Xaverian High School"
                  ];

                  let selectedOrg = null;

                  function renderList(filter = '') {
                    dropdownItemsContainer.innerHTML = '';
                    const filtered = organizations.filter(org =>
                      org.toLowerCase().includes(filter.toLowerCase())
                    );

                    if (filtered.length === 0) {
                      noResultsMsg.style.display = 'block';
                    } else {
                      noResultsMsg.style.display = 'none';
                      filtered.forEach(org => {
                        const div = document.createElement('div');
                        div.className = 'dropdown-item';
                        div.textContent = org;
                        div.addEventListener('click', () => {
                          selectOrganization(org);
                        });
                        dropdownItemsContainer.appendChild(div);
                      });

                      const otherDiv = document.createElement('div');
                      otherDiv.className = 'dropdown-item';
                      otherDiv.textContent = 'Other';
                      otherDiv.style.fontStyle = 'italic';
                      otherDiv.addEventListener('click', () => {
                        selectOrganization('Other');
                      });
                      dropdownItemsContainer.appendChild(otherDiv);
                    }
                  }

                  function selectOrganization(orgName) {
                    selectedOrg = orgName;
                    dropdownInput.value = orgName === 'Other' ? '' : orgName;
                    dropdown.classList.remove('open');
                    dropdownSearch.value = '';
                    renderList();
                    if (orgName === 'Other') {
                      otherOrgDiv.style.display = 'block';
                      otherOrgInput.value = '';
                      otherOrgInput.focus();
                    } else {
                      otherOrgDiv.style.display = 'none';
                      otherOrgInput.value = '';
                    }
                  }

                  dropdownInput.addEventListener('click', () => {
                    dropdown.classList.toggle('open');
                    dropdownSearch.focus();
                    renderList();
                  });

                  dropdownSearch.addEventListener('input', () => {
                    const val = dropdownSearch.value.trim();
                    renderList(val);

                    if (val.length > 0 && !organizations.some(org => org.toLowerCase() === val.toLowerCase())) {
                      noResultsMsg.style.display = 'block';
                    } else {
                      noResultsMsg.style.display = 'none';
                    }
                  });

                  document.addEventListener('click', e => {
                    if (!dropdown.contains(e.target)) {
                      dropdown.classList.remove('open');

                      const typed = dropdownSearch.value.trim();
                      if (typed.length > 0 && !organizations.some(org => org.toLowerCase() === typed.toLowerCase())) {
                        selectOrganization('Other');
                        otherOrgInput.value = typed;
                        dropdownInput.value = typed;
                      }
                    }
                  });

                  dropdownInput.addEventListener('keydown', e => {
                    e.preventDefault();
                  });
                })();
              </script>

              <p class="required-note">* Required fields</p>
              <div class="div-reset">
                  <button type="reset" class="record-clear" data-bs-toggle="modal" data-bs-target="#confirmResetModal">
                      <img class="record-clear-image" src="{{url_for('static', filename='images/restart.png')}}" alt="Reset">
                  </button>
                  <button type="submit" class="record-submit">Record</button>
              </div>
          </form>
        </div>

        <div class="modal-footer">
          <h5 class="footer-text">Made by Alex</h5>
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

</body>
</html>